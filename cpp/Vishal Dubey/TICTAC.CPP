#include <bits/stdc++.h>
using namespace std;
int main() 
{
    int t;
    cin>>t;
    while(t--)
    {
    string s1,s2,s3;
    int b=0,c=0,d=0,count=0;
    cin>>s1>>s2>>s3;
    for(int i=0;i<s1.length();i++)
    if(s1[i]=='X')
    {
    b++;
    }
    for(int i=0;i<s2.length();i++)
    if(s2[i]=='X')
    {
    b++;
    }
    for(int i=0;i<s3.length();i++)
    if(s3[i]=='X')
    {
    b++;
    }
    for(int i=0;i<s1.length();i++)
    if(s1[i]=='O')
    {
    c++;
    }
    for(int i=0;i<s2.length();i++)
    if(s2[i]=='O')
    {
    c++;
    }
    for(int i=0;i<s3.length();i++)
    if(s3[i]=='O')
    {
    c++;
    }
    for(int i=0;i<s1.length();i++)
    if(s1[i]=='_')
    {
    d++;
    }
    for(int i=0;i<s2.length();i++)
    if(s2[i]=='_')
    {
    d++;
    }
    for(int i=0;i<s3.length();i++)
    if(s3[i]=='_')
    {
    d++;
    }
    if(b-c>1||c>b)
    {
    cout<<3<<endl;
    count++;
    continue;
    }
    int x=0,y=0,z=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,f=0,g=0,u=0,w=0,v=0,h=0;
    if(s1.find("XXX")!=string::npos)
    x++;
    if(s2.find("XXX")!=string::npos)
    y++;
    if(s3.find("XXX")!=string::npos)
    z++;
    if(s1[0]=='X'&&s2[0]=='X'&&s3[0]=='X')
    q++;
    if(s1[1]=='X'&&s2[1]=='X'&&s3[1]=='X')
    r++;
    if(s1[2]=='X'&&s2[2]=='X'&&s3[2]=='X')
    s++;
    if(s1.find("OOO")!=string::npos)
    h++;
    if(s2.find("OOO")!=string::npos)
    u++;
    if(s3.find("OOO")!=string::npos)
    v++;
    if(s1[0]=='O'&&s2[0]=='O'&&s3[0]=='O')
    w++;
    if(s1[1]=='O'&&s2[1]=='O'&&s3[1]=='O')
    f++;
    if(s1[2]=='O'&&s2[2]=='O'&&s3[2]=='O')
    g++;
    if(s1[0]=='X'&&s2[1]=='X'&&s3[2]=='X')
    m++;
    if(s1[2]=='X'&&s2[1]=='X'&&s3[0]=='X')
    n++;
    if(s1[0]=='O'&&s2[1]=='O'&&s3[2]=='O')
    o++; 
    if(s1[2]=='O'&&s2[1]=='O'&&s3[0]=='O')
    p++;
    if((x==1||y==1||z==1||q==1||r==1||s==1)&&(m==0&&n==0&&o==0&&p==0)&&(h==0&&u==0&&v==0&&w==0&&f==0&&g==0))
    {
    if(x==1&&y==0&&z==0&&q==0&&r==0&&s==0&&b-c==1)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    if(x==0&&y==1&&z==0&&q==0&&r==0&&s==0&&b-c==1)
    {
    cout<<1<<endl;
    count++;
    continue;    
    }
    if(x==0&&y==0&&z==1&&q==0&&r==0&&s==0&&b-c==1)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    if(x==0&&y==0&&z==0&&q==1&&r==0&&s==0&&b-c==1)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    if(x==0&&y==0&&z==0&&q==0&&r==1&&s==0&&b-c==1)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    if(x==0&&y==0&&z==0&&q==0&&r==0&&s==1&&b-c==1)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    }
    if((h==1||u==1||v==1||w==1||f==1||g==1)&&(x==0&&y==0&&z==0&&q==0&&r==0&&s==0)&&(m==0&&n==0&&o==0&&p==0))
    {
    if(h==1&&u==0&&v==0&&w==0&&f==0&&g==0&&b==c)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    if(h==0&&u==1&&v==0&&w==0&&f==0&&g==0&&b==c)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    if(h==0&&u==0&&v==1&&w==0&&f==0&&g==0&&b==c)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    if(h==0&&u==0&&v==0&&w==1&&f==0&&g==0&&b==c)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    if(h==0&&u==0&&v==0&&w==0&&f==1&&g==0&&b==c)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    if(h==0&&u==0&&v==0&&w==0&&f==0&&g==1&&b==c)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    }
    if((m==1||n==1||o==1||p==1)&&(x==0&&y==0&&z==0&&q==0&&r==0&&s==0)&&(h==0&&u==0&&v==0&&w==0&&f==0&&g==0))
    {
    if(m==1&&n==0&&o==0&&p==0&&b-c==1)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    if(m==0&&n==1&&o==0&&p==0&&b-c==1)
    {
    cout<<1<<endl;  
    count++;
    continue;
    }
    if(m==0&&n==0&&o==1&&p==0&&b==c)
    {
    cout<<1<<endl;  
    count++;
    continue;
    }
    if(m==0&&n==0&&o==0&&p==1&&b==c)
    {
    cout<<1<<endl;  
    count++;
    continue;
    }
    }
    if(x==0&&y==0&&z==0&&m==0&&n==0&&q==0&&r==0&&s==0&&o==0&&p==0&&d<9&&h==0&&u==0&&v==0&&w==0&&f==0&&g==0)
    {
    cout<<2<<endl;
    count++;
    continue;
    }
    if(d==0&&b-c==1&&x==0&&y==0&&z==0&&m==0&&n==0&&q==0&&r==0&&s==0&&o==0&&p==0&&h==0&&u==0&&v==0&&w==0&&f==0&&g==0)
    {
    cout<<1<<endl;
    count++;
    continue;
    }
    if(count==0)
    {
    cout<<3<<endl;
    continue;
    }
    }
}
